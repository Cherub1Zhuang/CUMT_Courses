**直接内存的容量可以通过 `-XX:MaxDirectMemorySize`参数来制定，如果不去指定，则默认与Java堆最大值(Xmx)一致**。我们要是通过Unsafe::allocateMemory()来给分配直接内存的话是要显示释放内存资源的。这个可以通过重写Object的finalize方法，在其中显示的释放直接内存资源。

如果用DirectByteBuffer分配内存也会抛出内存溢出异常，但它抛出异常时并没有真正向操作系统申请分配内存，而是通过计算得知内存无法分配就会在代码里手动抛出异常。

由直接内存导致的内存溢出，一个明显特征就是在Heap Dump文件中不会看见有什么明显的异常，如果发现内存溢出后内存的Dump很小，而程序中又直接或间接使用了DirectMemory(**典型的就是NIO**)，那就可以重点检查一下直接内存方面的原因了。
