第一步：查找浏览器缓存，浏览器如果有缓存就直接可以给出IP地址就结束。但浏览器往往因为自身的轻便性。缓存的网址十分有限。

第二步：浏览器调用gethostbyname()方法。本地系统查询是否缓存过IP，如果缓存了就直接返回。.

第三步：再者就会访问本地DNS服务器。此过程用的是UDP传输！！！。但在这之前会查询本机的hosts文件是否有映射。所以有时候你的hosts文件没有生效的原因可能就是因为本地缓存了DNS和浏览器有缓存

第四步：如果本地DNS服务器都没有信息的话，就会向13台根服务器发送信息进行查询

第五步：根服务器返回信息给本地DNS服务器，让本地DNS服务器去找对应的一级域名如 .com .cn .rog服务器

第六步：如果访问的域名是属于顶级域名的如baidu.com,zouyishan.com这些，那就直接返回给本地DNS服务器。如果不是就继续转发二级域名。这样不断找

第七步：最后本地DNS知道了对应的IP地址，然后自己也将对应的地址写入缓存。最后返回给应用程序。就能知道IP然后愉快的访问了~~

讲讲DNS的传输是UDP还是TCP:
区域传送：DNS的规范规定了2种类型的DNS服务器，一个叫主DNS服务器，一个叫辅助DNS服务器。在一个区中主DNS服务器从自己本机的数据文件中读取该区的DNS数据信息，而辅助DNS服务器则从区的主DNS服务器中读取该区的DNS数据信息。当一个辅助DNS服务器启动时，它需要与主DNS服务器通信，并加载数据信息，这就叫做区传送（zone transfer）。 

区域传送时使用TCP，主要有一下两点考虑： 
1.辅域名服务器会定时（一般时3小时）向主域名服务器进行查询以便了解数据是否有变动。如有变动，则会执行一次区域传送，进行数据同步。区域传送将使用TCP而不是UDP，因为数据同步传送的数据量比一个请求和应答的数据量要多得多。 
2.TCP是一种可靠的连接，保证了数据的准确性。 

关于区域传送，我有个实际遇到过的例子。就是我的阿里云解析的域名的案例。我是由于好像要解析一个cdn还是什么加速的，于是我就把我域名不含www.的给弄下去了。结果当我用我没有www.访问域名的时候跳转出来的就是卖域名的网站。就意味着我被DNS劫持了。于是我立马上阿里云在给我那个cdn的那个解析下了，把我不含www.的域名解析上去。可能过了两小时，我的域名就又能成功访问了，这个过程我想就是阿里云服务器向13台根服务器进行区域传送，更新域名和IP的映射吧

域名解析时使用UDP协议： 
客户端向DNS服务器查询域名，一般返回的内容都不超过512字节，用UDP传输即可。不用经过TCP三次握手，这样DNS服务器负载更低，响应更快。虽然从理论上说，客户端也可以指定向DNS服务器查询的时候使用TCP，但事实上，很多DNS服务器进行配置的时候，仅支持UDP查询包。